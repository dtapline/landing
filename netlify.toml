[build]
publish = ".vitepress/dist"
command = "pnpm build"

[build.environment]
NODE_VERSION = "20"
PNPM_VERSION = "9.10.0"

[[redirects]]
from = "/demo"
to = "https://app.dtapline.com/demo"
status = 302

[[redirects]]
from = "/app/*"
to = "https://app.dtapline.com/:splat"
status = 302

[[redirects]]
from = "/github"
to = "https://github.com/dtapline/dtapline"
status = 302

# SPA fallback for VitePress
[[redirects]]
from = "/*"
to = "/index.html"
status = 200

[[headers]]
for = "/*"
[headers.values]
X-Frame-Options = "SAMEORIGIN"
X-Content-Type-Options = "nosniff"
X-XSS-Protection = "1; mode=block"
Referrer-Policy = "strict-origin-when-cross-origin"

[[headers]]
for = "/assets/*"
[headers.values]
Cache-Control = "public, max-age=31536000, immutable"

[[headers]]
for = "/*.png"
[headers.values]
Cache-Control = "public, max-age=31536000"

[[headers]]
for = "/*.svg"
[headers.values]
Cache-Control = "public, max-age=31536000"
